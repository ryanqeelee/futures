# 期权套利交易系统 - Streamlit Web界面使用指南

## 🚀 快速启动

### 1. 环境准备

确保已完成以下准备工作：
- Python 3.8+ 已安装
- 虚拟环境已创建并激活
- 所有依赖包已安装
- `.env` 文件已配置

### 2. 启动应用

#### 方式一：使用启动脚本（推荐）
```bash
./run_streamlit.sh
```

#### 方式二：直接使用streamlit命令
```bash
source venv/bin/activate
streamlit run app.py
```

### 3. 访问界面

应用启动后，在浏览器中访问：
- 本地访问：http://localhost:8501
- 网络访问：http://[你的IP]:8501

## 📱 界面功能介绍

### 主界面布局

应用采用现代化的Web界面设计，包含：

#### 侧边栏控制面板
- **系统状态监控**：显示系统运行状态和错误信息
- **配置管理**：检查.env配置和Token状态
- **扫描控制**：一键扫描和参数调整
- **系统信息**：插件数量和扫描历史

#### 主内容区域
分为四个标签页：
1. **🎯 扫描结果** - 套利机会展示和分析
2. **📊 实时监控** - 系统性能和健康状态
3. **📈 数据分析** - 历史数据和趋势分析
4. **⚙️ 系统设置** - 插件管理和缓存配置

### 核心功能详解

#### 1. 系统初始化
首次使用时需要进行系统初始化：
- 检查环境配置
- 加载策略插件
- 初始化数据适配器
- 建立缓存系统

#### 2. 一键扫描套利机会

**操作步骤：**
1. 在侧边栏调整扫描参数：
   - 最小利润阈值（默认1%）
   - 最大风险容忍度（默认10%）
   - 最大结果数量（默认100）

2. 点击"🚀 一键扫描套利机会"按钮

3. 系统将：
   - 实时显示扫描进度
   - 并行执行所有策略
   - 计算风险和收益指标
   - 排序和筛选结果

#### 3. 结果分析

**结果概览：**
- 发现机会数量
- 平均利润率
- 最高利润率  
- 平均风险评分

**详细表格：**
- 可排序的结果表格
- 支持数据筛选
- 一键导出CSV文件

**可视化图表：**
- 利润率分布直方图
- 风险-收益散点图
- 四象限分析
- 策略性能对比

#### 4. 实时监控

**系统健康状态：**
- 系统运行状态
- 缓存命中率
- 平均扫描时间

**性能指标：**
- 套利引擎性能
- 缓存系统性能
- 数据适配器状态

#### 5. 系统管理

**策略插件管理：**
- 查看已加载的策略插件
- 启用/禁用特定策略
- 查看插件加载状态和错误信息

**缓存系统管理：**
- 查看缓存统计信息
- 清空内存缓存
- 清空所有缓存

## ⚙️ 配置说明

### 环境配置文件 (.env)

```bash
# Tushare API Token（必需）
TUSHARE_TOKEN=your_token_here
```

### 扫描参数调整

| 参数 | 说明 | 默认值 | 推荐范围 |
|------|------|--------|----------|
| 最小利润阈值 | 筛选机会的最小利润要求 | 1% | 0.5% - 5% |
| 最大风险容忍度 | 可接受的最大风险水平 | 10% | 5% - 20% |
| 最大结果数量 | 返回结果的数量限制 | 100 | 50 - 500 |

### 系统性能调优

**缓存设置：**
- 内存缓存：默认启用，提供最快访问速度
- 磁盘缓存：默认启用，提供持久化存储
- Redis缓存：可选，适用于分布式部署

**并行处理：**
- 系统自动根据CPU核心数优化线程数
- 支持并行策略执行
- 智能任务调度和负载均衡

## 🔍 使用场景

### 日常套利扫描
1. 每日开盘前运行扫描
2. 关注高利润率、低风险的机会
3. 结合市场情况进行人工判断

### 策略回测分析
1. 使用历史数据进行策略验证
2. 分析不同参数设置的效果
3. 优化策略参数和风险控制

### 系统监控维护
1. 定期检查系统健康状态
2. 监控缓存命中率和性能指标
3. 及时清理过期缓存数据

## ⚠️ 注意事项

### 风险提示
- 套利交易存在市场风险，请谨慎操作
- 系统提供的是参考信息，不构成投资建议
- 实际交易前请进行充分的风险评估

### 系统限制
- 依赖于Tushare数据源的可用性
- 扫描结果的实时性受网络延迟影响
- 高频扫描可能受到API调用限制

### 故障排除
- 如遇导入错误，请检查虚拟环境和依赖安装
- 如遇Token错误，请验证.env文件配置
- 如遇性能问题，请检查系统资源使用情况

## 📞 技术支持

如遇到使用问题，可以：
1. 检查系统日志信息
2. 查看错误提示详情
3. 重启系统重新初始化

## 🔄 版本更新

当前版本：v1.0.0
- ✅ 完整的Web界面
- ✅ 一键扫描功能
- ✅ 实时结果展示
- ✅ 可视化分析工具
- ✅ 系统监控面板

## 📈 未来规划
- [ ] 实时数据推送
- [ ] 移动端适配
- [ ] 邮件报告功能
- [ ] API接口开放